<%= render 'partials/header' %>

<div class="contenedor-principal">
  <h1>Administración de Competiciones</h1>
  <hr>
    <div class="competences-table">
      
      <% @competition_categories.each do |competition_category| %>
        <div class="row category ">
          <div class="col-3 align-middle d-flex align-items-center">
            <h3 class="text-dark align-middle text-center">    
              <%= competition_category.number %>. <%= competition_category.name %>
              <br>
              <small>
                <%= link_to "#{material_icon.edit_mode}".html_safe, edit_competition_category_path(competition_category), class: 'text-secondary' %>
                <%= link_to "#{material_icon.delete_forever}".html_safe, competition_category, method: :delete, data: { confirm: '¿Estas seguro/a?'}, class: 'text-secondary' %>
              </small>
            </h3>
             
          </div>
          <div class="col">
            <% competition_category.generic_competences.each do |item| %>
              <div class="row competence">
                <div class="col-4 d-flex align-items-center">
                  <h5>
                    <strong><%= item.number %></strong>. <%= item.name %>
                    <small>
                      <%= link_to "#{material_icon.edit_mode}".html_safe, edit_generic_competence_path(item), class: 'text-secondary' %>
                      <%= link_to "#{material_icon.delete_forever}".html_safe, item, method: :delete, data: { confirm: '¿Estas seguro/a?'}, class: 'text-secondary' %>
                    </small>
                  </h5>
                </div>
                <div class="col">
                  <% item.generic_competence_attributes.each do |attrib| %>
                    <p><%= attrib.description %> <i>(<%= attrib.number %>)</i>
                      <%= link_to "#{material_icon.edit_mode}".html_safe, edit_generic_competence_attribute_path(attrib), class: 'text-secondary' %>
                      <%= link_to "#{material_icon.delete_forever}".html_safe, attrib, method: :delete, data: { confirm: '¿Estas seguro/a?'}, class: 'text-secondary' %>
                    </p>
                  <% end %>
                </div>
              </div>
            <% end %>
                
          </div>
        </div>
      <% end %>   
    </div>

    <br>
    <div class="row">
      <div class="col-3 text-center">
        <%= link_to 'Nueva Categoría', new_competition_category_path, class: 'btn btn-outline-primary' %>
      </div>
      <div class="col-3 text-center">
        <%= link_to 'Nueva Competencia', new_generic_competence_path, class: 'btn btn-outline-primary' %>       
      </div>
      <div class="col text-center">
        <%= link_to 'Nuevo Atributo', new_generic_competence_attribute_path, class: 'btn btn-outline-primary' %>       
      </div>
    </div>
  
</div>
<%= render 'partials/footer' %>
